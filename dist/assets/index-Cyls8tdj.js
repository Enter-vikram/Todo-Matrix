import{r as p,j as e,R as A}from"./react-CFs-3-xb.js";import{R as I}from"./react-dom-CI4bc1IL.js";import{S as P,M as T,P as L,C as R,a as z,b as U,T as B}from"./lucide-react-DBm8jqiq.js";import{R as M,P as O,a as $,C as _}from"./recharts-rmLOg2yc.js";import{R as W,a as N,L as k,B as K}from"./react-router-CMmGkpmR.js";import"./cookie-CY119PWS.js";import"./scheduler-C323NY8X.js";import"./clsx-B-dksMZM.js";import"./lodash-CtFucCFa.js";import"./tiny-invariant-BaFNuDhB.js";import"./d3-shape-nwul2LtV.js";import"./d3-path-CimkQT29.js";import"./react-smooth-BmUjY-uu.js";import"./prop-types-L5NmFoeK.js";import"./fast-equals-BIyco3rD.js";import"./victory-vendor-eFgrrWDw.js";import"./d3-scale-DCNNTN8k.js";import"./internmap-BkD7Hj8s.js";import"./d3-array-g_qRI3rN.js";import"./d3-time-format-j2_s_XYn.js";import"./d3-time-g9mLz1m7.js";import"./d3-interpolate-CvRPKVI0.js";import"./d3-color-9lF95FHy.js";import"./d3-format-CzD4bSOQ.js";import"./recharts-scale-CEDTliZZ.js";import"./decimal.js-light-ZKFLnszB.js";import"./eventemitter3-MNDi1JEb.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))d(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&d(c)}).observe(document,{childList:!0,subtree:!0});function i(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function d(r){if(r.ep)return;r.ep=!0;const o=i(r);fetch(r.href,o)}})();const C=p.createContext();function G({children:t}){const[s,i]=p.useState(()=>localStorage.getItem("theme")||"light");p.useEffect(()=>{localStorage.setItem("theme",s),document.documentElement.classList.toggle("dark",s==="dark")},[s]);const d=()=>{i(r=>r==="dark"?"light":"dark")};return e.jsx(C.Provider,{value:{theme:s,toggleTheme:d},children:t})}function E(){return p.useContext(C)}function J({size:t=60}){const s=t*.4;return e.jsxs("div",{style:{width:t,height:t,borderRadius:"50%",backgroundColor:"#F24E29",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:[e.jsx("div",{style:{content:'""',position:"absolute",width:"90%",height:"90%",border:"2px solid white",borderRadius:"50%"}}),e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:s,height:s,style:{zIndex:1,transform:"rotate(50deg)",stroke:"white",strokeWidth:2,fill:"none"},children:[e.jsx("path",{d:"M16 3v4a2 2 0 0 0 2 2h1l-5 5"}),e.jsx("path",{d:"M8 21v-4l-5-5h1a2 2 0 0 0 2-2V3"}),e.jsx("path",{d:"M18 3h-4"}),e.jsx("path",{d:"M6 3h4"})]})]})}function Q({search:t,setSearch:s}){const{theme:i,toggleTheme:d}=E(),r=i==="dark";return e.jsx("header",{className:"sticky top-0 z-50 backdrop-blur bg-[#F2EFC2]/70 dark:bg-[#0D0D0D]/70 text-[#0D0D0D] dark:text-white shadow-md",children:e.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{size:24})," ",e.jsx("h1",{className:"text-2xl font-bold tracking-tight text-[#1DA1F2] dark:text-[#F2EFC2]",children:"To-do"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"text",value:t,onChange:o=>s(o.target.value),placeholder:"Search...",className:"px-3 py-1 rounded-full bg-white/70 dark:bg-[#1e1e1e]/70 border border-[#D9C0BA] text-sm focus:outline-none"}),e.jsx("button",{onClick:d,className:"rounded-full p-2 border-2 border-[#F24E29] text-[#F24E29] dark:border-[#F2EFC2] dark:text-[#F2EFC2] hover:scale-105 transition",children:r?e.jsx(P,{size:20}):e.jsx(T,{size:20})})]})]})})}function H({newTask:t,setNewTask:s,addTask:i}){const d=o=>{s({...t,title:o.target.value})},r=o=>{o.key==="Enter"&&i()};return e.jsxs("div",{className:"mb-6 bg-[#F2EFC2]/70 dark:bg-[#1a1a1a] backdrop-blur-md border border-[#D9C0BA] dark:border-[#333] rounded-xl p-4 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-[#0D0D0D] dark:text-[#F2EFC2]",children:"Add New Task"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch gap-3",children:[e.jsx("input",{type:"text",value:t.title,onChange:d,onKeyDown:r,placeholder:"Enter task title...",className:"flex-1 px-4 py-2 rounded-lg border border-[#D9C0BA] dark:border-[#555] bg-white dark:bg-[#0D0D0D] text-sm focus:outline-none focus:ring-2 focus:ring-[#1DA1F2]"}),e.jsxs("div",{className:"flex gap-2 items-center justify-between sm:justify-start",children:[e.jsxs("label",{className:"flex items-center gap-1 text-sm text-[#0D0D0D] dark:text-[#F2EFC2]",children:[e.jsx("input",{type:"checkbox",checked:t.importance,onChange:()=>s({...t,importance:!t.importance})}),"Important"]}),e.jsxs("label",{className:"flex items-center gap-1 text-sm text-[#0D0D0D] dark:text-[#F2EFC2]",children:[e.jsx("input",{type:"checkbox",checked:t.urgency,onChange:()=>s({...t,urgency:!t.urgency})}),"Urgent"]})]}),e.jsxs("button",{onClick:i,className:"flex items-center gap-1 px-4 py-2 rounded-lg bg-[#F24E29] hover:bg-[#e44321] text-white text-sm font-medium transition",children:[e.jsx(L,{size:16}),"Add"]})]})]})}function V({task:t,toggleComplete:s,togglePin:i,deleteTask:d,animating:r}){const o=t.createdAt?new Intl.DateTimeFormat("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).format(new Date(t.createdAt)):"";return e.jsx("div",{className:`flex flex-col sm:flex-row items-start sm:items-center justify-between p-3 rounded-xl shadow-sm bg-white/80 dark:bg-[#0D0D0D] border border-[#D9C0BA] dark:border-[#444] transition-all ${r?"opacity-50 blur-sm":""}`,children:e.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:`text-sm font-medium break-words ${t.done?"line-through text-gray-400":"text-[#0D0D0D] dark:text-white"}`,children:t.title}),e.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[e.jsx("button",{onClick:()=>s(t.id),className:"text-[#1DA1F2] hover:text-blue-500",title:"Mark complete",children:t.done?e.jsx(R,{size:18}):e.jsx(z,{size:18})}),e.jsx("button",{onClick:()=>i(t.id),className:"text-green-500 hover:scale-110 transition",title:"Pin",children:e.jsx(U,{size:18,fill:t.pin?"currentColor":"none",className:t.pin?"rotate-45":""})}),e.jsx("button",{onClick:()=>d(t.id),className:"text-[#F24E29] hover:text-red-600",title:"Delete",children:e.jsx(B,{size:18})})]})]}),o&&e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:o})]})})}const X={q1:"Important & Urgent",q2:"Not Important but Urgent",q3:"Important but Not Urgent",q4:"Not Important & Not Urgent"};function Y({tasks:t,toggleComplete:s,togglePin:i,deleteTask:d,animatingTaskId:r}){const o={q1:[],q2:[],q3:[],q4:[]};t==null||t.forEach(l=>{const u=l.quadrant;o[u]||(o[u]=[]),o[u].push(l)});const c=l=>[...o[l]||[]].sort((h,x)=>h.pin===x.pin?0:h.pin?-1:1).map(h=>e.jsx(V,{task:h,toggleComplete:s,togglePin:i,deleteTask:d,animating:r===h.id},h.id));return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-6",children:["q1","q2","q3","q4"].map(l=>e.jsxs("div",{className:"bg-white/60 dark:bg-gray-900 p-4 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-black dark:text-white",children:X[l]}),e.jsx("div",{className:"space-y-3",children:c(l)})]},l))})}function v({total:t,completed:s,quadrants:i,tasks:d,activityLog:r}){const{isDarkMode:o}=E(),c=d.filter(a=>a.pin).length,l=t?Math.round(s/t*100):0,u=[{name:"Completed",value:s},{name:"Pending",value:t-s}],h=["#1DA1F2","#F24E29"],x=a=>new Date(a).toLocaleString("en-GB",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(","," â€¢");return e.jsxs("div",{className:"mt-8 space-y-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-sky-500 dark:text-sky-400",children:"ðŸ“Š Analytics Dashboard"}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex-1 p-4 rounded-xl shadow bg-white dark:bg-zinc-900",children:[e.jsx("p",{className:"text-muted-foreground text-sm mb-1",children:"Total Tasks"}),e.jsx("p",{className:"text-lg font-bold text-sky-600 dark:text-sky-400",children:t})]}),e.jsxs("div",{className:"flex-1 p-4 rounded-xl shadow bg-white dark:bg-zinc-900",children:[e.jsx("p",{className:"text-muted-foreground text-sm mb-1",children:"Completed"}),e.jsx("p",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:s})]}),e.jsxs("div",{className:"flex-1 p-4 rounded-xl shadow bg-white dark:bg-zinc-900",children:[e.jsx("p",{className:"text-muted-foreground text-sm mb-1",children:"Pinned"}),e.jsx("p",{className:"text-lg font-bold text-orange-600 dark:text-orange-400",children:c})]}),e.jsxs("div",{className:"flex-1 p-4 rounded-xl shadow bg-white dark:bg-zinc-900",children:[e.jsx("p",{className:"text-muted-foreground text-sm mb-1",children:"Progress"}),e.jsxs("p",{className:"text-lg font-bold text-rose-600 dark:text-rose-400",children:[l,"%"]})]})]}),e.jsxs("div",{className:"p-4 rounded-xl shadow bg-white dark:bg-zinc-900",children:[e.jsx("p",{className:"text-muted-foreground text-sm mb-2 font-medium",children:"Completion Ratio"}),e.jsx(M,{width:"100%",height:200,children:e.jsx(O,{children:e.jsx($,{data:u,cx:"50%",cy:"50%",labelLine:!1,outerRadius:60,fill:"#8884d8",dataKey:"value",children:u.map((a,g)=>e.jsx(_,{fill:h[g%h.length]},`cell-${g}`))})})}),e.jsxs("p",{className:"text-center text-xs text-gray-500 dark:text-gray-400 mt-2",children:[l,"% done"]})]}),e.jsxs("div",{className:"p-4 rounded-xl shadow bg-white dark:bg-zinc-900",children:[e.jsx("p",{className:"text-muted-foreground text-sm font-medium mb-3",children:"ðŸ•“ Recent Activity"}),e.jsx("ul",{className:"space-y-2 text-sm",children:r.length?r.slice(0,5).map((a,g)=>e.jsxs("li",{className:"flex justify-between items-center text-gray-800 dark:text-gray-200",children:[e.jsxs("span",{className:"font-medium truncate max-w-[70%]",children:[a.type,": ",a.task]}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 whitespace-nowrap",children:x(a.time)})]},g)):e.jsx("li",{className:"text-gray-400",children:"No recent activity"})})]}),e.jsx("div",{className:"overflow-x-auto rounded-xl shadow bg-white dark:bg-zinc-900",children:e.jsxs("table",{className:"min-w-full text-sm text-left",children:[e.jsx("thead",{className:"text-sm text-gray-700 bg-gray-100 dark:bg-zinc-800 dark:text-gray-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2",children:"Task"}),e.jsx("th",{className:"px-4 py-2",children:"Quadrant"}),e.jsx("th",{className:"px-4 py-2",children:"Created At"}),e.jsx("th",{className:"px-4 py-2",children:"Status"})]})}),e.jsx("tbody",{children:d.length?d.map((a,g)=>e.jsxs("tr",{className:"border-b dark:border-zinc-800",children:[e.jsx("td",{className:"px-4 py-2 font-medium text-gray-800 dark:text-gray-100",children:a.title}),e.jsx("td",{className:"px-4 py-2 text-gray-600 dark:text-gray-300",children:a.quadrant}),e.jsx("td",{className:"px-4 py-2 text-gray-500 dark:text-gray-400",children:x(a.createdAt)}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${a.done?"bg-green-200 text-green-800 dark:bg-green-700 dark:text-green-200":"bg-rose-200 text-rose-800 dark:bg-rose-700 dark:text-rose-200"}`,children:a.done?"Done":"Pending"})})]},g)):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-4 py-4 text-center text-gray-400 dark:text-gray-500",children:"No tasks yet"})})})]})})]})}function Z(t,s){const[i,d]=p.useState(()=>{try{const r=window.localStorage.getItem(t),o=r?JSON.parse(r):s;return o&&typeof o==typeof s&&(!Array.isArray(s)||Array.isArray(o))?o:(console.warn(`Invalid data for key "${t}" in localStorage, resetting...`),s)}catch(r){return console.warn(`Error reading localStorage key "${t}":`,r),s}});return p.useEffect(()=>{try{window.localStorage.setItem(t,JSON.stringify(i))}catch(r){console.warn(`Error writing to localStorage key "${t}":`,r)}},[t,i]),[i,d]}function ee(){const[t,s]=Z("tasks",[]),[i,d]=p.useState({title:"",importance:!0,urgency:!0}),[r,o]=p.useState(""),[c,l]=p.useState(!1),[u,h]=p.useState(null);p.useEffect(()=>{const n=t.filter(m=>typeof(m==null?void 0:m.title)=="string");n.length!==t.length&&(console.warn("Removed malformed tasks from localStorage"),s(n))},[]),p.useEffect(()=>{t.forEach(n=>{if(n.reminder&&!n.reminderShown){const m=new Date;new Date(n.reminder)<=m&&(alert(`Reminder: ${n.title}`),n.reminderShown=!0,s([...t]))}})},[t]);const x=t.length,a=t.filter(n=>n.done).length,g={"Important & Urgent":t.filter(n=>n.quadrant==="q1").length,"Not Important but Urgent":t.filter(n=>n.quadrant==="q2").length,"Important but Not Urgent":t.filter(n=>n.quadrant==="q3").length,"Neither Important nor Urgent":t.filter(n=>n.quadrant==="q4").length};function y(n,m){return n&&m?"q1":!n&&m?"q2":n&&!m?"q3":"q4"}function f(){if(!i.title.trim())return;const n=new Date,m={id:Date.now(),title:i.title,importance:i.importance,urgency:i.urgency,done:!1,pin:!1,createdAt:n.toISOString(),date:n.toLocaleDateString(),time:n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),quadrant:y(i.importance,i.urgency),reminder:null,reminderShown:!1};s([m,...t]),d({title:"",importance:!0,urgency:!0})}function b(n){h(n),setTimeout(()=>{s(t.filter(m=>m.id!==n)),h(null)},300)}function j(n){s(t.map(m=>m.id===n?{...m,done:!m.done}:m))}function S(n){s(t.map(m=>m.id===n?{...m,pin:!m.pin}:m))}const q=t.filter(n=>typeof(n==null?void 0:n.title)=="string"&&n.title.toLowerCase().includes(r.toLowerCase())),w=t.slice(0,5).map(n=>({type:n.done?"Completed":"Added",task:n.title,time:`${n.date} ${n.time}`})),F={q1:"Important & Urgent",q2:"Not Important but Urgent",q3:"Important but Not Urgent",q4:"Neither Important nor Urgent"};return e.jsx("div",{className:c?"dark":"",children:e.jsx("div",{className:"min-h-screen flex flex-col bg-[#F2EFC2] dark:bg-[#0D0D0D] text-gray-800 dark:text-gray-100 transition-colors duration-300",children:e.jsxs(W,{children:[e.jsx(N,{path:"/",element:e.jsxs(e.Fragment,{children:[e.jsx(Q,{darkMode:c,setDarkMode:l,search:r,setSearch:o}),e.jsxs("main",{className:"flex-1 flex flex-col px-4 max-w-3xl w-full mx-auto",children:[e.jsx(H,{newTask:i,setNewTask:d,addTask:f}),e.jsx(Y,{tasks:q,toggleComplete:j,togglePin:S,deleteTask:b,animatingTaskId:u,quadrantLabels:F}),e.jsx("div",{className:"md:hidden mt-4 mb-6",children:e.jsx(k,{to:"/analytics",className:`block text-center w-full py-3 px-6 rounded-xl shadow-xl font-semibold transition hover:scale-[1.02] 
                        border-2 border-[#0D0D0D] dark:border-[#F24E29] 
                        text-[#0D0D0D] dark:text-[#F24E29] 
                        bg-[#F2EFC2] dark:bg-[#0D0D0D]`,children:"ðŸ“Š View Analytics"})}),e.jsx("div",{className:"hidden md:block mt-4 pb-32",children:e.jsx(v,{total:x,completed:a,quadrants:g,tasks:t,activityLog:w})})]})]})}),e.jsx(N,{path:"/analytics",element:e.jsxs("main",{className:"px-4 max-w-3xl w-full mx-auto pt-4",children:[e.jsx(v,{total:x,completed:a,quadrants:g,tasks:t,activityLog:w}),e.jsx("div",{className:"md:hidden mt-6",children:e.jsx(k,{to:"/",className:`block w-full text-center py-3 px-6 rounded-xl shadow-xl font-semibold transition hover:scale-[1.02] 
                      border-2 border-[#0D0D0D] dark:border-[#F24E29] 
                      text-[#0D0D0D] dark:text-[#F24E29] 
                      bg-[#F2EFC2] dark:bg-[#0D0D0D]`,children:"â† Back to Tasks"})})]})})]})})})}const te="modulepreload",re=function(t,s){return new URL(t,s).href},D={},se=function(s,i,d){let r=Promise.resolve();if(i&&i.length>0){let c=function(x){return Promise.all(x.map(a=>Promise.resolve(a).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};const l=document.getElementsByTagName("link"),u=document.querySelector("meta[property=csp-nonce]"),h=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));r=c(i.map(x=>{if(x=re(x,d),x in D)return;D[x]=!0;const a=x.endsWith(".css"),g=a?'[rel="stylesheet"]':"";if(!!d)for(let b=l.length-1;b>=0;b--){const j=l[b];if(j.href===x&&(!a||j.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${x}"]${g}`))return;const f=document.createElement("link");if(f.rel=a?"stylesheet":te,a||(f.as="script"),f.crossOrigin="",f.href=x,h&&f.setAttribute("nonce",h),document.head.appendChild(f),a)return new Promise((b,j)=>{f.addEventListener("load",b),f.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${x}`)))})}))}function o(c){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=c,window.dispatchEvent(l),!l.defaultPrevented)throw c}return r.then(c=>{for(const l of c||[])l.status==="rejected"&&o(l.reason);return s().catch(o)})};function ne(t={}){const{immediate:s=!1,onNeedRefresh:i,onOfflineReady:d,onRegistered:r,onRegisteredSW:o,onRegisterError:c}=t;let l,u;const h=async(a=!0)=>{await u};async function x(){if("serviceWorker"in navigator){if(l=await se(async()=>{const{Workbox:a}=await import("./workbox-window-B9K5rw8f.js");return{Workbox:a}},[],import.meta.url).then(({Workbox:a})=>new a("./sw.js",{scope:"./",type:"classic"})).catch(a=>{c==null||c(a)}),!l)return;l.addEventListener("activated",a=>{(a.isUpdate||a.isExternal)&&window.location.reload()}),l.addEventListener("installed",a=>{a.isUpdate||d==null||d()}),l.register({immediate:s}).then(a=>{o?o("./sw.js",a):r==null||r(a)}).catch(a=>{c==null||c(a)})}}return u=x(),h}ne();I.createRoot(document.getElementById("root")).render(e.jsx(A.StrictMode,{children:e.jsx(K,{children:e.jsx(G,{children:e.jsx(ee,{})})})}));
